## Задача 1

Пользователь (разработчик) написал в канал поддержки, что у него уже 3 минуты происходит CRUD операция в MongoDB и её нужно прервать.


- напишите список операций, которые вы будете производить для остановки запроса пользователя
  - Нужно при помощи db.currentOp() найти операции, которые долго выполняются
  - Затем, определив идентификатор операции, завершить её при помощи db.killOp()
- предложите вариант решения проблемы с долгими (зависающими) запросами в MongoDB

Можно установить максимальное время выполнения запросов при помощи параметра maxTimeMS

## Задача 2
При масштабировании сервиса до N реплик вы увидели, что:

- сначала рост отношения записанных значений к истекшим
- Redis блокирует операции записи

Как вы думаете, в чем может быть проблема?

Вероятно проблема в том, что в какой-то момент появляентся большое количество истекших ключей. В документации примерно это поведение описано в разделе "Latency generated by expires"

## Задача 3

Вы подняли базу данных MySQL для использования в гис-системе. При росте количества записей, в таблицах базы, пользователи начали жаловаться на ошибки вида:
```
InterfaceError: (InterfaceError) 2013: Lost connection to MySQL server during query u'SELECT..... '
```

Как вы думаете, почему это начало происходить и как локализовать проблему?

Данное поведение наблюдается когда запросы выполняются слишком долго. На это так же указывает то, что база выросла.

Какие пути решения данной проблемы вы можете предложить?

- Оптимизировать запросы, чтобы они выполнялись быстрее
- Увеличить производительность CPU и дисков сервера (установить более производительный процессор, выделить больше ядер, вместо жестких дисков установить твердотельные, увеличить объём ОЗУ (возможно из-за нехватки ОЗУ происходит свопинг))
- Разделить большие таблицы
- увеличить таймауты для запросов

## Задача 4

После запуска пользователи начали жаловаться, что СУБД время от времени становится недоступной. В dmesg вы видите, что:

```
postmaster invoked oom-killer
```
Как вы думаете, что происходит?

Похоже, что postgresql не хватает памяти при выполнении какого-то запроса или нескольких параллельных запросов. Так же возможно какой-то другой процесс в системе занял слишком много памяти.

Как бы вы решили данную проблему?

Нужно проанализировать использование памяти в системе, локализовать либо процесс, который использует много памяти, либо объёмный запрос. Если в результате не обнаружатся аномалии в использовании памяти(т.е. памяти не хватает для нужных запросов, и никаких процессов, использующих слишком много памяти не обнаружится), то в сервер нужно добавить ещё ОЗУ. Если же обнаружится запрос с излишним использованием памяти - то нужно рассмотреть вопрос оптимизации запроса (если нет возможности - добавить ОЗУ). В случае обнаружения процесса, использующего много памяти -  рассмотреть возможность отключения этого процесса, возможно установить обновление для исполняемого файла процесса, или связаться с разработчиком
